#项目目录介绍
通过`lord new lor_demo`即可新建一个新的lor项目,执行该命令后,会提示新建的文件:
```
[root@localhost ting]# lord new lor_demo
Creating app: lor_demo...
  created file lor_demo/conf/nginx-dev.conf
  created file lor_demo/app/middleware/inject_app_info.lua
  created file lor_demo/app/static/README.md
  created file lor_demo/app/main.lua
  created file lor_demo/app/middleware/README.md
  created file lor_demo/app/views/user/info.html
  created file lor_demo/app/server.lua
  created file lor_demo/app/views/index.html
  created file lor_demo/conf/README.md
  created file lor_demo/reload.sh
  created file lor_demo/stop.sh
  created file lor_demo/start.sh
  created file lor_demo/app/routes/user.lua
  created file lor_demo/app/router.lua
  created file lor_demo/conf/mime.types
  created file lor_demo/.gitignore
```
完成后,会发现当前目录下多了一个文件夹`lor_demo`,进入到文件夹中会看到:
``` 
total 12
drwxr-xr-x 6 root root 117 Nov  8 00:18 app
drwxr-xr-x 2 root root  63 Nov  8 00:18 conf
-rw-r--r-- 1 root root 600 Nov  8 00:18 reload.sh
-rw-r--r-- 1 root root 581 Nov  8 00:18 start.sh
-rw-r--r-- 1 root root 580 Nov  8 00:18 stop.sh
```
* app:存放应用的文件夹,自己的代码基本都放到这个文件夹下面
* conf: 配置文件所在文件夹
* reload/start/stop.sh: 重启,启动,停止命令,根据配置文件启动了nginx
### app文件夹
app文件夹中主要存放的是应用的代码,查看一下:
``` 
main.lua  middleware  router.lua  routes  server.lua  static  views
```
* middleware文件夹:存放自定义的插件.
* routes文件夹: 存放自定义的路由,相当于控制器.
* static和view文件夹: 存放静态文件和视图.
* main.lua: 程序的启动文件,主要作用是调用了`server`
* server.lua: 用于配置项目的插件,试图引擎等等.
* router.lua: 总的路由管理,最外层的路由放到这里,然后在这里调用位于`routes`中的子路由.

具体的功能在demo中可以看到,基本都有中文描述

### conf配置
`conf`文件夹中存放配置文件,每个配置文件名称为`nginx-name`,name为区分开发环境和测试环境,启动的时候如果加入参数`start.sh prod`那么就会寻找`nginx-prod`的配置文件.

一个配置文件如下:
``` 
#generated by `lor framework`
    # user www www;用于指明nginx的worker进程通过哪个用户运行,如果不设置,就为nobody,这样容易出现没有权限的错误
pid tmp/dev-nginx.pid;

# 最大工作进程,一般为CPU数量
worker_processes 4;

events {
    # 每一个worker进程的连接数
    worker_connections 4096;
}

http {
    # 开启发送文件
    sendfile on;
    include ./mime.types;

    #指定lua的环境变量位置
    lua_package_path "./app/?.lua;./?.lua;/usr/local/lor/?.lua;;;;";
    # 是否缓存lua代码,开发时设为off,这样会将变动及时体现出来
    lua_code_cache on;

    server {
        # List port
        listen 8888;

        # Access log
        access_log logs/dev-access.log;

        # Error log
        error_log logs/dev-error.log;

        # this variable is for view render（lua-resty-template)
        set $template_root '';

        #静态文件的位置,
        location /static {
            alias ./app/static; #app/static;
        }

        # 所有进来的请求都通过main.lua处理
        location / {
            content_by_lua_file ./app/main.lua;
        }
    }
}
```
#执行过程介绍
执行流程如下:
##### 加载nginx配置文件阶段
读取nginx配置文件,并解析
##### 加载lua模块阶段
第一次请求时,会访问配置文件中的`/`路径,会加载`lua`的各个模块,相当于初始化,如果开启了`lua_code_cache`的话,以后就会省去这个加载阶段.
##### 执行请求
##### 返回结果